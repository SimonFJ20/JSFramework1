(()=>{"use strict";var e=function(){function e(){}return e.setTitle=function(e){document.title=e},e.setCssImport=function(e){var n=document.createElement("link");n.rel="stylesheet",n.href="./style/"+e,document.head.appendChild(n)},e.id=function(e){return document.getElementById(e)},e.q=function(e){return document.querySelector(e)},e}(),n=function(e){return e.replace(/\r?\n|\r|\s{4}/g,"")},t=[],o=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){t.push(e)}))},i="frameworkappauth",r=i+"username",s=i+"token",a=null,l=function(){if(null!==sessionStorage.getItem(i)&&"0"!==sessionStorage.getItem(i)){if(null!==sessionStorage.getItem(r)&&"0"!==sessionStorage.getItem(r)&&null!==sessionStorage.getItem(s)&&"0"!==sessionStorage.getItem(s)){var e=sessionStorage.getItem(r),n=sessionStorage.getItem(s);a={username:e,token:n}}return!0}return!1},u=function(){var e;sessionStorage.setItem(i,"true"),null!==a&&(e=a,sessionStorage.setItem(s,e.token),sessionStorage.setItem(r,e.username))},d=!1,c=function(){sessionStorage.removeItem(i),sessionStorage.removeItem(s),sessionStorage.removeItem(r),location.reload()},m=function(){if(d){var n=e.id("topbarProfileButton");n.addEventListener("click",c),null!==a&&(n.innerText=a.username.charAt(0).toUpperCase()+a.username.slice(1))}},f=function(e){return o(m),d=e.authorized,!1===e.authorized?n('\n        <div id="topbar">\n            <div class="title">\n                <img src="./assets/favicon-32x32.png">\n                <h1>Framework App</h1>\n            </div>\n            <div class="public">\n            </div>\n            <div class="private">\n                <a href="/" class="button">Login</a>\n            </div>\n        </div>\n        '):!0===e.authorized?n('\n        <div id="topbar">\n            <div class="title">\n                <img src="./assets/favicon-32x32.png">\n                <h1>Framework App</h1>\n            </div>\n            <div class="public">\n                <a href="/" class="button">Home</a>\n                <a href="/feed" class="button">Feed</a>\n                <a href="/friends" class="button">Friends</a>\n            </div>\n            <div class="private">\n                <a href="/" class="button" id="topbarProfileButton">My Profile</a>\n            </div>\n        </div>\n        '):void 0},g=function(){var n,t,o=e.id("loginNotFound"),i=e.id("username"),r=e.id("password");""!=i.value&&""!=r.value?(n={username:i.value,password:r.value},t=function(e){e.authorized?(u(),location.reload()):(o.innerText="Incorrect Username or Password!",o.style.visibility="visible")},function(e,n){!function(e,n,t){var o={url:"/auth/login",method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify(n)};$.ajax(o).done(t)}(0,e,(function(e){n(e)}))}(n,(function(e){if(e.authorized){if(void 0!==e.username&&void 0!==e.token){var n={username:e.username,token:e.token};a=n}u(),location.reload()}t(e)}))):(o.innerText="Please fill in both Username and Password!",o.style.visibility="visible")},p=function(){},v=function(){},h=function(){var n,t,o;e.id("loading").style.visibility="hidden",null===(n=e.id("login"))||void 0===n||n.addEventListener("click",g),null===(t=e.id("register"))||void 0===t||t.addEventListener("click",p),null===(o=e.id("recover"))||void 0===o||o.addEventListener("click",v)},b=function(){var n;e.setTitle("Homepage"),n=function(e){document.body.style.backgroundImage="url("+e.url+")",document.body.style.backgroundSize="100vw 100vh"},function(e,n){var t={url:"/misc/background",method:"GET",timeout:0};$.ajax(t).done(n)}(0,(function(e){n(e)}))},k=function(t){return o(b),t.authorized?n("\n        "+f({authorized:!0})+"\n        "):n("\n        "+f({authorized:!1})+"\n        "+(e.setCssImport("login.css"),o(h),n("\n    "+(e.setCssImport("loading.css"),n('\n        <div id="loading">\n            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgb(255, 255, 255, 0) none repeat scroll 0% 0%; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n                <circle cx="50" cy="50" r="32" stroke-width="8" stroke="#ff1f1f" stroke-dasharray="50.26548245743669 50.26548245743669" fill="none" stroke-linecap="round">\n                <animateTransform attributeName="transform" type="rotate" dur="1s" repeatCount="indefinite" keyTimes="0;1" values="0 50 50;360 50 50"></animateTransform>\n                </circle>\n                <circle cx="50" cy="50" r="23" stroke-width="8" stroke="#ffffd0" stroke-dasharray="36.12831551628262 36.12831551628262" stroke-dashoffset="36.12831551628262" fill="none" stroke-linecap="round">\n                <animateTransform attributeName="transform" type="rotate" dur="1s" repeatCount="indefinite" keyTimes="0;1" values="0 50 50;-360 50 50"></animateTransform>\n                </circle>\n            </svg>\n        </div>\n    ')+'\n    <div id="loginpage">\n        <form id="loginform">\n            <input class="loginform logintext" id="username" type="text" placeholder="Username">\n            <br>\n            <input class="loginform logintext" id="password" type="password" placeholder="Password">\n            <p id="loginNotFound">Incorrect Username or Password!</p>\n            <hr>\n            <input class="loginform loginbutton" id="login" type="button" value="Login">\n            <br>\n            <div id="regrec">\n                <input class="loginform loginbutton regrec" id="register" type="button" value="Register">\n                <input class="loginform loginbutton regrec" id="recover" type="button" value="Recover">\n            </div>\n\n        </form>\n    </div>\n    '))+"\n        "))},y=document.getElementsByTagName("x-app")[0];null!=y?(y.innerHTML=function(){switch(e.setTitle("App"),e.setCssImport("main.css"),window.location.pathname){case"/":case"/login":return n(""+k({authorized:l()}));case"/todo":return n(""+f({authorized:l()})+(fetch("http://gamer/todo.page").then((function(e){return e.text()})).then((function(e){return document.write(e)})),n("")));default:return n(""+k({authorized:l()}))}}(),t.forEach((function(e){e()}))):console.log("%c<x-app></x-app>%c is not defined!","color: white; background-color: blue; font-size: 1.2em","color: red; font-size: 1.2em")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wdWJsaWMvLi9zcmMvZnJhbWV3b3JrLnRzIiwid2VicGFjazovL3B1YmxpYy8uL3NyYy9hdXRoLnRzIiwid2VicGFjazovL3B1YmxpYy8uL3NyYy9jb21wb25lbnRzL3RvcGJhci50cyIsIndlYnBhY2s6Ly9wdWJsaWMvLi9zcmMvY29tcG9uZW50cy9sb2dpbmZvcm0udHMiLCJ3ZWJwYWNrOi8vcHVibGljLy4vc3JjL2FqYXgudHMiLCJ3ZWJwYWNrOi8vcHVibGljLy4vc3JjL2NvbXBvbmVudHMvbG9hZGluZy50cyIsIndlYnBhY2s6Ly9wdWJsaWMvLi9zcmMvcm91dGVzL2xhbmRpbmcudHMiLCJ3ZWJwYWNrOi8vcHVibGljLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3B1YmxpYy8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vcHVibGljLy4vc3JjL3JvdXRlcy90b2RvcGFnZS50cyJdLCJuYW1lcyI6WyJzZXRUaXRsZSIsInRpdGxlIiwiZG9jdW1lbnQiLCJzZXRDc3NJbXBvcnQiLCJ1cmwiLCJuZXdMaW5rRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJyZWwiLCJocmVmIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiaWQiLCJnZXRFbGVtZW50QnlJZCIsInEiLCJlbGVtZW50UXVlcnkiLCJxdWVyeVNlbGVjdG9yIiwiaHRtbCIsInJlcGxhY2UiLCJydW50aW1lQ2FsbGJhY2tzIiwicnVudGltZSIsImNhbGxiYWNrcyIsImZvckVhY2giLCJjYWxsYmFjayIsInB1c2giLCJhdXRoS2V5IiwiYXV0aEtleVVzZXJuYW1lIiwiYXV0aEtleVRva2VuIiwic2Vzc2lvblVzZXIiLCJjaGVja0NsaWVudEF1dGgiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJ1c2VybmFtZSIsInRva2VuIiwic2V0Q2xpZW50QXV0aCIsInVzZXIiLCJzZXRJdGVtIiwiYXV0aG9yaXplZCIsInRvcGJhclByb2ZpbGVCdXR0b25FdmVudCIsInJlbW92ZUl0ZW0iLCJsb2NhdGlvbiIsInJlbG9hZCIsImF0UnVudGltZSIsInRvcGJhclByb2ZpbGVCdXR0b24iLCJET00iLCJhZGRFdmVudExpc3RlbmVyIiwiaW5uZXJUZXh0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsIlRvcGJhciIsInByb3BzIiwibG9naW5FdmVudCIsInVzZXJMb2dpblJlcXVlc3QiLCJsb2dpbk5vdEZvdW5kIiwicGFzc3dvcmQiLCJ2YWx1ZSIsInVzZXJMb2dpblJlc3BvbnNlIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwidXNlckxvZ2luIiwiZGF0YSIsInNldHRpbmdzIiwibWV0aG9kIiwidGltZW91dCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiJCIsImFqYXgiLCJkb25lIiwicG9zdCIsInJlc3BvbnNlIiwidXNlckxvZ2luUG9zdCIsInVuZGVmaW5lZCIsInJlZ2lzdGVyRXZlbnQiLCJyZWNvdmVyRXZlbnQiLCJiYWNrZ3JvdW5kSW1hZ2VSZXNwb25zZSIsImJvZHkiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kU2l6ZSIsImdldCIsIkxhbmRpbmciLCJodG1sQXBwVGFnIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbm5lckhUTUwiLCJ3aW5kb3ciLCJwYXRobmFtZSIsImZldGNoIiwidGhlbiIsInRleHQiLCJ3cml0ZSIsIkFwcCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJtQkFHQSwrQkFvQkEsT0FuQmtCLEVBQUFBLFNBQVcsU0FBQ0MsR0FDdEJDLFNBQVNELE1BQVFBLEdBSVAsRUFBQUUsYUFBZSxTQUFDQyxHQUMxQixJQUFNQyxFQUFpQkgsU0FBU0ksY0FBYyxRQUM5Q0QsRUFBZUUsSUFBTSxhQUNyQkYsRUFBZUcsS0FBTyxXQUFhSixFQUNuQ0YsU0FBU08sS0FBS0MsWUFBWUwsSUFHaEIsRUFBQU0sR0FBSyxTQUFDQSxHQUNoQixPQUFPVCxTQUFTVSxlQUFlRCxJQUdyQixFQUFBRSxFQUFJLFNBQUNDLEdBQ2YsT0FBT1osU0FBU2Es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LFlBRVZrRixPQUFPOUMsU0FBUytDLFVBQ25CLElBQUssSUFHTCxJQUFLLFNBQ0QsT0FBT3RFLEVBQWEsR0FBR2lFLEVBQVEsQ0FBQzdDLFdBQVlSLE9BRWhELElBQUssUUFDRCxPQUFPWixFQUFhLEdBQUdpQyxFQUFPLENBQUNiLFdBQVlSLE9DYm5EMkQsTUFBTSwwQkFBMEJDLE1BQUssU0FBQWpCLEdBQVksT0FBQUEsRUFBU2tCLFVBQVFELE1BQUssU0FBQTVCLEdBQVEsT0FBQTFELFNBQVN3RixNQUFNOUIsTUFFdkY1QyxFQUFhLE1EYWhCLFFBQ0ksT0FBT0EsRUFBSyxHQUFHaUUsRUFBUSxDQUFDN0MsV0FBWVIsUURmckIrRCxHUDhCdkJ6RSxFQUFpQkcsU0FBUSxTQUFDQyxHQUN0QkEsUU81QkpzRSxRQUFRQyxJQUFJLHNDQUNaLHlEQUEwRCxpQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogR2VuZXJhbCBIVE1MIHV0aWxpdGllcyAqL1xyXG5cclxuLy8gRm9yIGdlbmVyYWxcclxuZXhwb3J0IGNsYXNzIERPTSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHNldFRpdGxlID0gKHRpdGxlOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipVUkwgc3BlY2lmaWVzIGZpbGUgaW4gL3N0eWxlLyBmb2xkZXIgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0Q3NzSW1wb3J0ID0gKHVybDogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3TGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuICAgICAgICBuZXdMaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuICAgICAgICBuZXdMaW5rRWxlbWVudC5ocmVmID0gXCIuL3N0eWxlL1wiICsgdXJsO1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobmV3TGlua0VsZW1lbnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGlkID0gKGlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHEgPSAoZWxlbWVudFF1ZXJ5OiBzdHJpbmcpID0+IHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50UXVlcnkpO1xyXG4gICAgfTtcclxufVxyXG5cclxuLy8gcmVtb3ZlcyB3aGl0ZXNwYWNlIGV0Y1xyXG5leHBvcnQgY29uc3QgaHRtbCA9IChodG1sOiBzdHJpbmcpOiBzdHJpbmcgPT5cclxuICAgIGh0bWwucmVwbGFjZSgvXFxyP1xcbnxcXHJ8XFxzezR9L2csIFwiXCIpO1xyXG5cclxubGV0IHJ1bnRpbWVDYWxsYmFja3M6IEZ1bmN0aW9uW10gPSBbXTtcclxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAoLi4uY2FsbGJhY2tzOiBGdW5jdGlvbltdKTogdm9pZCA9PiB7XHJcbiAgICBjYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcclxuICAgICAgICBydW50aW1lQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfSk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBleGVjUnVudGltZVNjcmlwdHMgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBydW50aW1lQ2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgY2FsbGJhY2soKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyogQWpheCArIEpRdWVyeSAqL1xyXG4vKlxyXG4gKiAgIEFsbHRob3VnaCBpIHRoaW5rIGl0IHdvdWxkIGJlIGJldHRlciB0byBkbyB3aXRob3V0IGpxdWVyeSwgaW0gbGF6eVxyXG4gKi9cclxuXHJcbmV4cG9ydCBjb25zdCBnZXQgPSAodXJsOiBzdHJpbmcsIGNhbGxiYWNrOiAocmVzcG9uc2U6IG9iamVjdCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgXCJ1cmxcIjogdXJsLFxyXG4gICAgICAgIFwibWV0aG9kXCI6IFwiR0VUXCIsXHJcbiAgICAgICAgXCJ0aW1lb3V0XCI6IDAsXHJcbiAgICB9O1xyXG4gICAgJC5hamF4KHNldHRpbmdzKS5kb25lKGNhbGxiYWNrKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3N0ID0gKHVybDogc3RyaW5nLCBkYXRhOiBvYmplY3QsIGNhbGxiYWNrOiAocmVzcG9uc2U6IG9iamVjdCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICB0aW1lb3V0OiAwLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH07XHJcbiAgICAkLmFqYXgoc2V0dGluZ3MpLmRvbmUoY2FsbGJhY2spO1xyXG59O1xyXG5cclxuLyogTWlzY2VsbGFuZW91cyB1dGlsaXRpZXMgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBtYWtlaWQgPSAobGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG4gICAgbGV0IGlkID0gXCJcIjtcclxuICAgIGNvbnN0IGNoYXJhY3RlcnMgPVxyXG4gICAgICAgIFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIjtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzLmxlbmd0aCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlkO1xyXG59O1xyXG4iLCJpbXBvcnQgeyB1c2VyTG9naW5Qb3N0IH0gZnJvbSBcIi4vYWpheFwiO1xyXG5pbXBvcnQgeyBVc2VyLCBVc2VyTG9naW5SZXF1ZXN0LCBVc2VyTG9naW5SZXNwb25zZSB9IGZyb20gXCIuL21vZGVsc1wiO1xyXG5cclxuXHJcblxyXG4vKiBBbGwgdGhpcyBtYXkgYmUgb3ZlcndyaXR0ZW4gKi9cclxuXHJcblxyXG5jb25zdCBhdXRoS2V5ID0gJ2ZyYW1ld29ya2FwcGF1dGgnO1xyXG5jb25zdCBhdXRoS2V5VXNlcm5hbWUgPSBhdXRoS2V5ICsgJ3VzZXJuYW1lJztcclxuY29uc3QgYXV0aEtleVRva2VuID0gYXV0aEtleSArICd0b2tlbic7XHJcblxyXG5cclxuZXhwb3J0IGxldCBzZXNzaW9uVXNlcjogVXNlciB8IG51bGwgPSBudWxsO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBjaGVja0NsaWVudEF1dGggPSAoKTogYm9vbGVhbiA9PiB7XHJcbiAgICBpZihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGF1dGhLZXkpICE9PSBudWxsICYmIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oYXV0aEtleSkgIT09ICcwJykge1xyXG4gICAgICAgIGlmKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oYXV0aEtleVVzZXJuYW1lKSAhPT0gbnVsbCAmJiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGF1dGhLZXlVc2VybmFtZSkgIT09ICcwJykge1xyXG4gICAgICAgICAgICBpZihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGF1dGhLZXlUb2tlbikgIT09IG51bGwgJiYgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShhdXRoS2V5VG9rZW4pICE9PSAnMCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lOiBzdHJpbmcgPSA8c3RyaW5nPnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oYXV0aEtleVVzZXJuYW1lKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW46IHN0cmluZyA9IDxzdHJpbmc+c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShhdXRoS2V5VG9rZW4pXHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyOiBVc2VyID0ge3VzZXJuYW1lOiB1c2VybmFtZSwgdG9rZW46IHRva2VufTtcclxuICAgICAgICAgICAgICAgIHNlc3Npb25Vc2VyID0gdXNlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHNldENsaWVudEF1dGhVc2VyID0gKHVzZXI6IFVzZXIpOiB2b2lkID0+IHtcclxuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oYXV0aEtleVRva2VuLCB1c2VyLnRva2VuKTtcclxuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oYXV0aEtleVVzZXJuYW1lLCB1c2VyLnVzZXJuYW1lKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldENsaWVudEF1dGggPSAoKTogdm9pZCA9PiB7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGF1dGhLZXksICd0cnVlJyk7XHJcbiAgICBpZihzZXNzaW9uVXNlciAhPT0gbnVsbCkgc2V0Q2xpZW50QXV0aFVzZXIoc2Vzc2lvblVzZXIpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbG9naW4gPSAodXNlckxvZ2luUmVxdWVzdDogVXNlckxvZ2luUmVxdWVzdCwgY2FsbGJhY2s6ICh1c2VyTG9naW5SZXNwb25zZTogVXNlckxvZ2luUmVzcG9uc2UpID0+IHZvaWQpID0+IHtcclxuICAgIHVzZXJMb2dpblBvc3QodXNlckxvZ2luUmVxdWVzdCwgKHVzZXJMb2dpblJlc3BvbnNlOiBVc2VyTG9naW5SZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGlmKHVzZXJMb2dpblJlc3BvbnNlLmF1dGhvcml6ZWQpIHtcclxuICAgICAgICAgICAgaWYodXNlckxvZ2luUmVzcG9uc2UudXNlcm5hbWUgIT09IHVuZGVmaW5lZCAmJiB1c2VyTG9naW5SZXNwb25zZS50b2tlbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyOiBVc2VyID0ge3VzZXJuYW1lOiB1c2VyTG9naW5SZXNwb25zZS51c2VybmFtZSwgdG9rZW46IHVzZXJMb2dpblJlc3BvbnNlLnRva2VufTtcclxuICAgICAgICAgICAgICAgIHNlc3Npb25Vc2VyID0gdXNlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRDbGllbnRBdXRoKCk7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYWxsYmFjayh1c2VyTG9naW5SZXNwb25zZSk7XHJcbiAgICB9KVxyXG59IFxyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZUNsaWVudEF1dGggPSAoKTogdm9pZCA9PiB7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGF1dGhLZXkpO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShhdXRoS2V5VG9rZW4pO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShhdXRoS2V5VXNlcm5hbWUpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY2xlYXJTZXNzaW9uID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcclxufVxyXG5cclxuXHJcbiIsImltcG9ydCB7IHJlbW92ZUNsaWVudEF1dGgsIHNlc3Npb25Vc2VyIH0gZnJvbSBcIi4uL2F1dGhcIjtcclxuaW1wb3J0IHsgRE9NLCBodG1sLCBydW50aW1lIH0gZnJvbSBcIi4uL2ZyYW1ld29ya1wiO1xyXG5cclxubGV0IGF1dGhvcml6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbmNvbnN0IHRvcGJhclByb2ZpbGVCdXR0b25FdmVudCA9ICgpID0+IHtcclxuICAgIHJlbW92ZUNsaWVudEF1dGgoKTtcclxuICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG59XHJcblxyXG5jbGFzcyBQcm9wcyB7XHJcbiAgICBhdXRob3JpemVkOiBib29sZWFuID0gZmFsc2U7XHJcbn1cclxuXHJcbmNvbnN0IGF0UnVudGltZSA9ICgpID0+IHtcclxuICAgIC8vRE9NLmlkKCd0b3BiYXJQcm9maWxlQnV0dG9uJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9wYmFyUHJvZmlsZUJ1dHRvbkV2ZW50KTtcclxuICAgIGlmKGF1dGhvcml6ZWQpIHtcclxuICAgICAgICBjb25zdCB0b3BiYXJQcm9maWxlQnV0dG9uID0gPEhUTUxBbmNob3JFbGVtZW50PkRPTS5pZCgndG9wYmFyUHJvZmlsZUJ1dHRvbicpXHJcbiAgICAgICAgdG9wYmFyUHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvcGJhclByb2ZpbGVCdXR0b25FdmVudCk7XHJcbiAgICAgICAgaWYoc2Vzc2lvblVzZXIgIT09IG51bGwpIHRvcGJhclByb2ZpbGVCdXR0b24uaW5uZXJUZXh0ID0gc2Vzc2lvblVzZXIudXNlcm5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzZXNzaW9uVXNlci51c2VybmFtZS5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVG9wYmFyID0gKHByb3BzOiBQcm9wcykgPT4ge1xyXG4gICAgcnVudGltZShhdFJ1bnRpbWUpO1xyXG4gICAgYXV0aG9yaXplZCA9IHByb3BzLmF1dGhvcml6ZWQ7XHJcbiAgICBpZihwcm9wcy5hdXRob3JpemVkID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiBodG1sKC8qaHRtbCovYFxyXG4gICAgICAgIDxkaXYgaWQ9XCJ0b3BiYXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi4vYXNzZXRzL2Zhdmljb24tMzJ4MzIucG5nXCI+XHJcbiAgICAgICAgICAgICAgICA8aDE+RnJhbWV3b3JrIEFwcDwvaDE+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHVibGljXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJpdmF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIiBjbGFzcz1cImJ1dHRvblwiPkxvZ2luPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgKTtcclxuICAgIH1lbHNlIGlmKHByb3BzLmF1dGhvcml6ZWQgPT09IHRydWUpIHtcclxuICAgICAgICByZXR1cm4gaHRtbCgvKmh0bWwqL2BcclxuICAgICAgICA8ZGl2IGlkPVwidG9wYmFyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCIuL2Fzc2V0cy9mYXZpY29uLTMyeDMyLnBuZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGgxPkZyYW1ld29yayBBcHA8L2gxPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInB1YmxpY1wiPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIiBjbGFzcz1cImJ1dHRvblwiPkhvbWU8L2E+XHJcbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiL2ZlZWRcIiBjbGFzcz1cImJ1dHRvblwiPkZlZWQ8L2E+XHJcbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiL2ZyaWVuZHNcIiBjbGFzcz1cImJ1dHRvblwiPkZyaWVuZHM8L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJpdmF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIiBjbGFzcz1cImJ1dHRvblwiIGlkPVwidG9wYmFyUHJvZmlsZUJ1dHRvblwiPk15IFByb2ZpbGU8L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGApO1xyXG4gICAgfVxyXG4gICAgXHJcbn07XHJcbiIsImltcG9ydCB7IERPTSwgaHRtbCwgcnVudGltZSB9IGZyb20gXCIuLi9mcmFtZXdvcmtcIjtcclxuaW1wb3J0IHsgTG9hZGluZywgc2V0TG9hZGluZ1N0YXRlIH0gZnJvbSBcIi4vbG9hZGluZ1wiO1xyXG5pbXBvcnQgeyBsb2dpbiwgc2V0Q2xpZW50QXV0aCB9IGZyb20gXCIuLi9hdXRoXCI7XHJcblxyXG5jb25zdCBsb2dpbkV2ZW50ID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgbG9naW5Ob3RGb3VuZCA9IDxIVE1MUGFyYWdyYXBoRWxlbWVudD5ET00uaWQoJ2xvZ2luTm90Rm91bmQnKTtcclxuICAgIGNvbnN0IHVzZXJuYW1lID0gPEhUTUxJbnB1dEVsZW1lbnQ+RE9NLmlkKCd1c2VybmFtZScpO1xyXG4gICAgY29uc3QgcGFzc3dvcmQgPSA8SFRNTElucHV0RWxlbWVudD5ET00uaWQoJ3Bhc3N3b3JkJyk7XHJcbiAgICBpZih1c2VybmFtZS52YWx1ZSAhPSAnJyAmJiBwYXNzd29yZC52YWx1ZSAhPSAnJykge1xyXG4gICAgICAgIGxvZ2luKHt1c2VybmFtZTogdXNlcm5hbWUudmFsdWUsIHBhc3N3b3JkOiBwYXNzd29yZC52YWx1ZX0sICh1c2VyTG9naW5SZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBpZih1c2VyTG9naW5SZXNwb25zZS5hdXRob3JpemVkKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHNldENsaWVudEF1dGgoKTtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsb2dpbk5vdEZvdW5kLmlubmVyVGV4dCA9ICdJbmNvcnJlY3QgVXNlcm5hbWUgb3IgUGFzc3dvcmQhJztcclxuICAgICAgICAgICAgICAgIGxvZ2luTm90Rm91bmQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgICAgbG9naW5Ob3RGb3VuZC5pbm5lclRleHQgPSAnUGxlYXNlIGZpbGwgaW4gYm90aCBVc2VybmFtZSBhbmQgUGFzc3dvcmQhJztcclxuICAgICAgICBsb2dpbk5vdEZvdW5kLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHJlZ2lzdGVyRXZlbnQgPSAoKTogdm9pZCA9PiB7XHJcblxyXG59XHJcblxyXG5jb25zdCByZWNvdmVyRXZlbnQgPSAoKTogdm9pZCA9PiB7XHJcblxyXG59XHJcblxyXG5jb25zdCBhdFJ1bnRpbWUgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBzZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xyXG4gICAgRE9NLmlkKCdsb2dpbicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxvZ2luRXZlbnQpO1xyXG4gICAgRE9NLmlkKCdyZWdpc3RlcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlZ2lzdGVyRXZlbnQpO1xyXG4gICAgRE9NLmlkKCdyZWNvdmVyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVjb3ZlckV2ZW50KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IExvZ2luZm9ybSA9ICgpID0+IHtcclxuICAgIERPTS5zZXRDc3NJbXBvcnQoJ2xvZ2luLmNzcycpO1xyXG4gICAgcnVudGltZShhdFJ1bnRpbWUpO1xyXG4gICAgcmV0dXJuIGh0bWwoLypodG1sKi9gXHJcbiAgICAke0xvYWRpbmcoKX1cclxuICAgIDxkaXYgaWQ9XCJsb2dpbnBhZ2VcIj5cclxuICAgICAgICA8Zm9ybSBpZD1cImxvZ2luZm9ybVwiPlxyXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJsb2dpbmZvcm0gbG9naW50ZXh0XCIgaWQ9XCJ1c2VybmFtZVwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJVc2VybmFtZVwiPlxyXG4gICAgICAgICAgICA8YnI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImxvZ2luZm9ybSBsb2dpbnRleHRcIiBpZD1cInBhc3N3b3JkXCIgdHlwZT1cInBhc3N3b3JkXCIgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiPlxyXG4gICAgICAgICAgICA8cCBpZD1cImxvZ2luTm90Rm91bmRcIj5JbmNvcnJlY3QgVXNlcm5hbWUgb3IgUGFzc3dvcmQhPC9wPlxyXG4gICAgICAgICAgICA8aHI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImxvZ2luZm9ybSBsb2dpbmJ1dHRvblwiIGlkPVwibG9naW5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJMb2dpblwiPlxyXG4gICAgICAgICAgICA8YnI+XHJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJyZWdyZWNcIj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImxvZ2luZm9ybSBsb2dpbmJ1dHRvbiByZWdyZWNcIiBpZD1cInJlZ2lzdGVyXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiUmVnaXN0ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImxvZ2luZm9ybSBsb2dpbmJ1dHRvbiByZWdyZWNcIiBpZD1cInJlY292ZXJcIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJSZWNvdmVyXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICA8L2Rpdj5cclxuICAgIGApO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBCYWNrZ3JvdW5kSW1hZ2VSZXNwb25zZSwgVXNlckxvZ2luUmVxdWVzdCwgVXNlckxvZ2luUmVzcG9uc2UgfSBmcm9tIFwiLi9tb2RlbHNcIjtcclxuaW1wb3J0IHsgZ2V0LCBwb3N0IH0gZnJvbSAnLi9mcmFtZXdvcmsnXHJcblxyXG5leHBvcnQgY29uc3QgdXNlckxvZ2luUG9zdCA9ICh1c2VyTG9naW46IFVzZXJMb2dpblJlcXVlc3QsIGNhbGxiYWNrOiAodXNlckxvZ2luUmVzcG9uc2U6IFVzZXJMb2dpblJlc3BvbnNlKSA9PiB2b2lkKTogdm9pZCA9PiB7XHJcbiAgICBwb3N0KCcvYXV0aC9sb2dpbicsIHVzZXJMb2dpbiwgKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgY2FsbGJhY2soPFVzZXJMb2dpblJlc3BvbnNlPnJlc3BvbnNlKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByYW5kb21CYWNrZ3JvdW5kSW1hZ2VHZXQgPSAoY2FsbGJhY2s6IChiYWNrZ3JvdW5kSW1hZ2VSZXNwb25zZTogQmFja2dyb3VuZEltYWdlUmVzcG9uc2UpID0+IHZvaWQpOiB2b2lkID0+IHtcclxuICAgIGdldCgnL21pc2MvYmFja2dyb3VuZCcsIChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGNhbGxiYWNrKDxCYWNrZ3JvdW5kSW1hZ2VSZXNwb25zZT5yZXNwb25zZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbiIsImltcG9ydCB7IERPTSwgaHRtbCB9IGZyb20gXCIuLi9mcmFtZXdvcmtcIlxyXG5cclxuZXhwb3J0IGNvbnN0IHNldExvYWRpbmdTdGF0ZSA9IChzdGF0ZTogYm9vbGVhbikgPT4ge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IDxIVE1MRWxlbWVudD5ET00uaWQoJ2xvYWRpbmcnKTtcclxuICAgIGlmKHN0YXRlKSB7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTG9hZGluZyA9ICgpID0+IHtcclxuICAgIERPTS5zZXRDc3NJbXBvcnQoJ2xvYWRpbmcuY3NzJyk7XHJcbiAgICBcclxuICAgIHJldHVybiBodG1sKC8qaHRtbCovYFxyXG4gICAgICAgIDxkaXYgaWQ9XCJsb2FkaW5nXCI+XHJcbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHN0eWxlPVwibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjU1LCAyNTUsIDI1NSwgMCkgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvO1wiIHdpZHRoPVwiMjAwcHhcIiBoZWlnaHQ9XCIyMDBweFwiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWlkWU1pZFwiPlxyXG4gICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCIzMlwiIHN0cm9rZS13aWR0aD1cIjhcIiBzdHJva2U9XCIjZmYxZjFmXCIgc3Ryb2tlLWRhc2hhcnJheT1cIjUwLjI2NTQ4MjQ1NzQzNjY5IDUwLjI2NTQ4MjQ1NzQzNjY5XCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCI+XHJcbiAgICAgICAgICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPVwidHJhbnNmb3JtXCIgdHlwZT1cInJvdGF0ZVwiIGR1cj1cIjFzXCIgcmVwZWF0Q291bnQ9XCJpbmRlZmluaXRlXCIga2V5VGltZXM9XCIwOzFcIiB2YWx1ZXM9XCIwIDUwIDUwOzM2MCA1MCA1MFwiPjwvYW5pbWF0ZVRyYW5zZm9ybT5cclxuICAgICAgICAgICAgICAgIDwvY2lyY2xlPlxyXG4gICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCIyM1wiIHN0cm9rZS13aWR0aD1cIjhcIiBzdHJva2U9XCIjZmZmZmQwXCIgc3Ryb2tlLWRhc2hhcnJheT1cIjM2LjEyODMxNTUxNjI4MjYyIDM2LjEyODMxNTUxNjI4MjYyXCIgc3Ryb2tlLWRhc2hvZmZzZXQ9XCIzNi4xMjgzMTU1MTYyODI2MlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiPlxyXG4gICAgICAgICAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT1cInRyYW5zZm9ybVwiIHR5cGU9XCJyb3RhdGVcIiBkdXI9XCIxc1wiIHJlcGVhdENvdW50PVwiaW5kZWZpbml0ZVwiIGtleVRpbWVzPVwiMDsxXCIgdmFsdWVzPVwiMCA1MCA1MDstMzYwIDUwIDUwXCI+PC9hbmltYXRlVHJhbnNmb3JtPlxyXG4gICAgICAgICAgICAgICAgPC9jaXJjbGU+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYCk7XHJcbn1cclxuIiwiaW1wb3J0IHsgaHRtbCwgRE9NLCBydW50aW1lIH0gZnJvbSAnLi4vZnJhbWV3b3JrJztcclxuaW1wb3J0IHsgVG9wYmFyIH0gZnJvbSAnLi4vY29tcG9uZW50cy90b3BiYXInO1xyXG5pbXBvcnQgeyBMb2dpbmZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL2xvZ2luZm9ybSc7XHJcbmltcG9ydCB7IHJhbmRvbUJhY2tncm91bmRJbWFnZUdldCB9IGZyb20gJy4uL2FqYXgnO1xyXG5cclxuY2xhc3MgUHJvcHMge1xyXG4gICAgYXV0aG9yaXplZDogYm9vbGVhbiA9IGZhbHNlO1xyXG59XHJcblxyXG5jb25zdCBhdFJ1bnRpbWUgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBET00uc2V0VGl0bGUoJ0hvbWVwYWdlJyk7XHJcbiAgICByYW5kb21CYWNrZ3JvdW5kSW1hZ2VHZXQoKGJhY2tncm91bmRJbWFnZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBiYWNrZ3JvdW5kSW1hZ2VSZXNwb25zZS51cmwgKyAnKSc7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICcxMDB2dyAxMDB2aCdcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMYW5kaW5nID0gKHByb3BzOiBQcm9wcykgPT4ge1xyXG4gICAgcnVudGltZShhdFJ1bnRpbWUpO1xyXG4gICAgaWYocHJvcHMuYXV0aG9yaXplZCkge1xyXG4gICAgICAgIHJldHVybiBodG1sKGBcclxuICAgICAgICAke1RvcGJhcih7YXV0aG9yaXplZDogdHJ1ZX0pfVxyXG4gICAgICAgIGApO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICAgIHJldHVybiBodG1sKGBcclxuICAgICAgICAke1RvcGJhcih7YXV0aG9yaXplZDogZmFsc2V9KX1cclxuICAgICAgICAke0xvZ2luZm9ybSgpfVxyXG4gICAgICAgIGApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuL2FwcFwiO1xuaW1wb3J0IHsgZXhlY1J1bnRpbWVTY3JpcHRzIH0gZnJvbSBcIi4vZnJhbWV3b3JrXCI7XG5cbmNvbnN0IGh0bWxBcHBUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgneC1hcHAnKVswXTtcblxuaWYoaHRtbEFwcFRhZyAhPSBudWxsKSB7XG4gICAgaHRtbEFwcFRhZy5pbm5lckhUTUwgPSBBcHAoKTtcbiAgICBleGVjUnVudGltZVNjcmlwdHMoKTtcbn1lbHNlIHtcbiAgICBjb25zb2xlLmxvZygnJWM8eC1hcHA+PC94LWFwcD4lYyBpcyBub3QgZGVmaW5lZCEnLFxuICAgICdjb2xvcjogd2hpdGU7IGJhY2tncm91bmQtY29sb3I6IGJsdWU7IGZvbnQtc2l6ZTogMS4yZW0nLCAnY29sb3I6IHJlZDsgZm9udC1zaXplOiAxLjJlbScpO1xufVxuXG4iLCJpbXBvcnQgeyBjaGVja0NsaWVudEF1dGgsIHNldENsaWVudEF1dGggfSBmcm9tICcuL2F1dGgnO1xyXG5pbXBvcnQgeyBUb3BiYXIgfSBmcm9tICcuL2NvbXBvbmVudHMvdG9wYmFyJztcclxuaW1wb3J0IHsgaHRtbCwgRE9NIH0gZnJvbSAnLi9mcmFtZXdvcmsnO1xyXG5pbXBvcnQgeyBMYW5kaW5nIH0gZnJvbSAnLi9yb3V0ZXMvbGFuZGluZyc7XHJcbmltcG9ydCB7IFRvZG9wYWdlIH0gZnJvbSAnLi9yb3V0ZXMvdG9kb3BhZ2UnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEFwcCA9ICgpOiBzdHJpbmcgPT4ge1xyXG4gICAgRE9NLnNldFRpdGxlKCdBcHAnKTtcclxuICAgIERPTS5zZXRDc3NJbXBvcnQoJ21haW4uY3NzJylcclxuXHJcbiAgICBzd2l0Y2god2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKSB7XHJcbiAgICAgICAgY2FzZSAnLyc6XHJcbiAgICAgICAgICAgIHJldHVybiBodG1sKC8qaHRtbCovYCR7TGFuZGluZyh7YXV0aG9yaXplZDogY2hlY2tDbGllbnRBdXRoKCl9KX1gKTtcclxuXHJcbiAgICAgICAgY2FzZSAnL2xvZ2luJzpcclxuICAgICAgICAgICAgcmV0dXJuIGh0bWwoLypodG1sKi9gJHtMYW5kaW5nKHthdXRob3JpemVkOiBjaGVja0NsaWVudEF1dGgoKX0pfWApO1xyXG5cclxuICAgICAgICBjYXNlICcvdG9kbyc6XHJcbiAgICAgICAgICAgIHJldHVybiBodG1sKC8qaHRtbCovYCR7VG9wYmFyKHthdXRob3JpemVkOiBjaGVja0NsaWVudEF1dGgoKX0pfSR7VG9kb3BhZ2UoKX1gKTtcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGh0bWwoYCR7TGFuZGluZyh7YXV0aG9yaXplZDogY2hlY2tDbGllbnRBdXRoKCl9KX1gKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSBcIi4uL2ZyYW1ld29ya1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFRvZG9wYWdlID0gKCkgPT4ge1xyXG5cclxuICAgIFxyXG4gICAgZmV0Y2goJ2h0dHA6Ly9nYW1lci90b2RvLnBhZ2UnKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkudGhlbihkYXRhID0+IGRvY3VtZW50LndyaXRlKGRhdGEpKTtcclxuXHJcbiAgICByZXR1cm4gaHRtbCgvKmh0bWwqL2BgKTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9