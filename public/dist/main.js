(()=>{"use strict";var e=function(){function e(){}return e.setTitle=function(e){document.title=e},e.setCssImport=function(e){var n=document.createElement("link");n.rel="stylesheet",n.href="./style/"+e,document.head.appendChild(n)},e.id=function(e){return document.getElementById(e)},e.q=function(e){return document.querySelector(e)},e}(),n=function(e){return e.replace(/\r?\n|\r|\s{4}/g,"")},t=[],o=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){t.push(e)}))},i="frameworkappauth",r=i+"username",s=i+"token",a=null,l=function(){if(null!==sessionStorage.getItem(i)&&"0"!==sessionStorage.getItem(i)){if(null!==sessionStorage.getItem(r)&&"0"!==sessionStorage.getItem(r)&&null!==sessionStorage.getItem(s)&&"0"!==sessionStorage.getItem(s)){var e=sessionStorage.getItem(r),n=sessionStorage.getItem(s);a={username:e,token:n}}return!0}return!1},d=function(){var e;sessionStorage.setItem(i,"true"),null!==a&&(e=a,sessionStorage.setItem(s,e.token),sessionStorage.setItem(r,e.username))},u=!1,c=function(){sessionStorage.removeItem(i),sessionStorage.removeItem(s),sessionStorage.removeItem(r),location.reload()},m=function(){if(u){var n=e.id("topbarProfileButton");n.addEventListener("click",c),null!==a&&(n.innerText=a.username.charAt(0).toUpperCase()+a.username.slice(1))}},f=function(e){return o(m),u=e.authorized,!1===e.authorized?n('\n        <div id="topbar">\n            <div class="title">\n                <img src="./assets/favicon-32x32.png">\n                <h1>Framework App</h1>\n            </div>\n            <div class="public">\n            </div>\n            <div class="private">\n                <a href="/" class="button">Login</a>\n            </div>\n        </div>\n        '):!0===e.authorized?n('\n        <div id="topbar">\n            <div class="title">\n                <img src="./assets/favicon-32x32.png">\n                <h1>Framework App</h1>\n            </div>\n            <div class="public">\n                <a href="/" class="button">Home</a>\n                <a href="/feed" class="button">Feed</a>\n                <a href="/friends" class="button">Friends</a>\n            </div>\n            <div class="private">\n                <a href="/" class="button" id="topbarProfileButton">My Profile</a>\n            </div>\n        </div>\n        '):void 0},g=function(){var n,t,o=e.id("loginNotFound"),i=e.id("username"),r=e.id("password");""!=i.value&&""!=r.value?(n={username:i.value,password:r.value},t=function(e){e.authorized?(d(),location.reload()):(o.innerText="Incorrect Username or Password!",o.style.visibility="visible")},function(e,n){!function(e,n,t){var o={url:"/auth/login",method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify(n)};$.ajax(o).done(t)}(0,e,(function(e){n(e)}))}(n,(function(e){if(e.authorized){if(void 0!==e.username&&void 0!==e.token){var n={username:e.username,token:e.token};a=n}d(),location.reload()}t(e)}))):(o.innerText="Please fill in both Username and Password!",o.style.visibility="visible")},p=function(){},v=function(){},h=function(){var n,t,o;e.id("loading").style.visibility="hidden",null===(n=e.id("login"))||void 0===n||n.addEventListener("click",g),null===(t=e.id("register"))||void 0===t||t.addEventListener("click",p),null===(o=e.id("recover"))||void 0===o||o.addEventListener("click",v)},b=function(t){return e.setTitle("Homepage"),t.authorized?n("\n        "+f({authorized:!0})+"\n        "):n("\n        "+f({authorized:!1})+"\n        "+(e.setCssImport("login.css"),o(h),n("\n    "+(e.setCssImport("loading.css"),n('\n        <div id="loading">\n            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgb(255, 255, 255, 0) none repeat scroll 0% 0%; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n                <circle cx="50" cy="50" r="32" stroke-width="8" stroke="#ff1f1f" stroke-dasharray="50.26548245743669 50.26548245743669" fill="none" stroke-linecap="round">\n                <animateTransform attributeName="transform" type="rotate" dur="1s" repeatCount="indefinite" keyTimes="0;1" values="0 50 50;360 50 50"></animateTransform>\n                </circle>\n                <circle cx="50" cy="50" r="23" stroke-width="8" stroke="#ffffd0" stroke-dasharray="36.12831551628262 36.12831551628262" stroke-dashoffset="36.12831551628262" fill="none" stroke-linecap="round">\n                <animateTransform attributeName="transform" type="rotate" dur="1s" repeatCount="indefinite" keyTimes="0;1" values="0 50 50;-360 50 50"></animateTransform>\n                </circle>\n            </svg>\n        </div>\n    ')+'\n    <div id="loginpage">\n        <form id="loginform">\n            <input class="loginform logintext" id="username" type="text" placeholder="Username">\n            <br>\n            <input class="loginform logintext" id="password" type="password" placeholder="Password">\n            <p id="loginNotFound">Incorrect Username or Password!</p>\n            <hr>\n            <input class="loginform loginbutton" id="login" type="button" value="Login">\n            <br>\n            <div id="regrec">\n                <input class="loginform loginbutton regrec" id="register" type="button" value="Register">\n                <input class="loginform loginbutton regrec" id="recover" type="button" value="Recover">\n            </div>\n\n        </form>\n    </div>\n    '))+"\n        "))},k=document.getElementsByTagName("x-app")[0];null!=k?(k.innerHTML=function(){switch(e.setTitle("App"),e.setCssImport("main.css"),window.location.pathname){case"/":case"/login":return n(""+b({authorized:l()}));case"/todo":return n(""+f({authorized:l()})+(fetch("http://gamer/todo.page").then((function(e){return e.text()})).then((function(e){return document.write(e)})),n("")));default:return n(""+b({authorized:l()}))}}(),t.forEach((function(e){e()}))):console.log("%c<x-app></x-app>%c is not defined!","color: white; background-color: blue; font-size: 1.2em","color: red; font-size: 1.2em")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wdWJsaWMvLi9zcmMvZnJhbWV3b3JrLnRzIiwid2VicGFjazovL3B1YmxpYy8uL3NyYy9hdXRoLnRzIiwid2VicGFjazovL3B1YmxpYy8uL3NyYy9jb21wb25lbnRzL3RvcGJhci50cyIsIndlYnBhY2s6Ly9wdWJsaWMvLi9zcmMvY29tcG9uZW50cy9sb2dpbmZvcm0udHMiLCJ3ZWJwYWNrOi8vcHVibGljLy4vc3JjL2FqYXgudHMiLCJ3ZWJwYWNrOi8vcHVibGljLy4vc3JjL2NvbXBvbmVudHMvbG9hZGluZy50cyIsIndlYnBhY2s6Ly9wdWJsaWMvLi9zcmMvcm91dGVzL2xhbmRpbmcudHMiLCJ3ZWJwYWNrOi8vcHVibGljLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3B1YmxpYy8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vcHVibGljLy4vc3JjL3JvdXRlcy90b2RvcGFnZS50cyJdLCJuYW1lcyI6WyJzZXRUaXRsZSIsInRpdGxlIiwiZG9jdW1lbnQiLCJzZXRDc3NJbXBvcnQiLCJ1cmwiLCJuZXdMaW5rRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJyZWwiLCJocmVmIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiaWQiLCJnZXRFbGVtZW50QnlJZCIsInEiLCJlbGVtZW50UXVlcnkiLCJxdWVyeVNlbGVjdG9yIiwiaHRtbCIsInJlcGxhY2UiLCJydW50aW1lQ2FsbGJhY2tzIiwicnVudGltZSIsImNhbGxiYWNrcyIsImZvckVhY2giLCJjYWxsYmFjayIsInB1c2giLCJhdXRoS2V5IiwiYXV0aEtleVVzZXJuYW1lIiwiYXV0aEtleVRva2VuIiwic2Vzc2lvblVzZXIiLCJjaGVja0NsaWVudEF1dGgiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJ1c2VybmFtZSIsInRva2VuIiwic2V0Q2xpZW50QXV0aCIsInVzZXIiLCJzZXRJdGVtIiwiYXV0aG9yaXplZCIsInRvcGJhclByb2ZpbGVCdXR0b25FdmVudCIsInJlbW92ZUl0ZW0iLCJsb2NhdGlvbiIsInJlbG9hZCIsImF0UnVudGltZSIsInRvcGJhclByb2ZpbGVCdXR0b24iLCJET00iLCJhZGRFdmVudExpc3RlbmVyIiwiaW5uZXJUZXh0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsIlRvcGJhciIsInByb3BzIiwibG9naW5FdmVudCIsInVzZXJMb2dpblJlcXVlc3QiLCJsb2dpbk5vdEZvdW5kIiwicGFzc3dvcmQiLCJ2YWx1ZSIsInVzZXJMb2dpblJlc3BvbnNlIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwidXNlckxvZ2luIiwiZGF0YSIsInNldHRpbmdzIiwibWV0aG9kIiwidGltZW91dCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiJCIsImFqYXgiLCJkb25lIiwicG9zdCIsInJlc3BvbnNlIiwidXNlckxvZ2luUG9zdCIsInVuZGVmaW5lZCIsInJlZ2lzdGVyRXZlbnQiLCJyZWNvdmVyRXZlbnQiLCJMYW5kaW5nIiwiaHRtbEFwcFRhZyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5uZXJIVE1MIiwid2luZG93IiwicGF0aG5hbWUiLCJmZXRjaCIsInRoZW4iLCJ0ZXh0Iiwid3JpdGUiLCJBcHAiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoibUJBR0EsK0JBb0JBLE9BbkJrQixFQUFBQSxTQUFXLFNBQUNDLEdBQ3RCQyxTQUFTRCxNQUFRQSxHQUlQLEVBQUFFLGFBQWUsU0FBQ0MsR0FDMUIsSUFBTUMsRUFBaUJILFNBQVNJLGNBQWMsUUFDOUNELEVBQWVFLElBQU0sYUFDckJGLEVBQWVHLEtBQU8sV0FBYUosRUFDbkNGLFNBQVNPLEtBQUtDLFlBQVlMLElBR2hCLEVBQUFNLEdBQUssU0FBQ0EsR0FDaEIsT0FBT1QsU0FBU1UsZUFBZUQsSUFHckIsRUFBQUUsRUFBSSxTQUFDQyxHQUNmLE9BQU9aLFNBQVNhLGNBQWNELElBRXRDLEVBcEJBLEdBdUJhRSxFQUFPLFNBQUNBLEdBQ2pCLE9BQUFBLEVBQUtDLFFBQVEsa0JBQW1CLEtBRWhDQyxF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ImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogR2VuZXJhbCBIVE1MIHV0aWxpdGllcyAqL1xyXG5cclxuLy8gRm9yIGdlbmVyYWxcclxuZXhwb3J0IGNsYXNzIERPTSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHNldFRpdGxlID0gKHRpdGxlOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipVUkwgc3BlY2lmaWVzIGZpbGUgaW4gL3N0eWxlLyBmb2xkZXIgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0Q3NzSW1wb3J0ID0gKHVybDogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3TGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuICAgICAgICBuZXdMaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuICAgICAgICBuZXdMaW5rRWxlbWVudC5ocmVmID0gXCIuL3N0eWxlL1wiICsgdXJsO1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobmV3TGlua0VsZW1lbnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGlkID0gKGlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHEgPSAoZWxlbWVudFF1ZXJ5OiBzdHJpbmcpID0+IHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50UXVlcnkpO1xyXG4gICAgfTtcclxufVxyXG5cclxuLy8gcmVtb3ZlcyB3aGl0ZXNwYWNlIGV0Y1xyXG5leHBvcnQgY29uc3QgaHRtbCA9IChodG1sOiBzdHJpbmcpOiBzdHJpbmcgPT5cclxuICAgIGh0bWwucmVwbGFjZSgvXFxyP1xcbnxcXHJ8XFxzezR9L2csIFwiXCIpO1xyXG5cclxubGV0IHJ1bnRpbWVDYWxsYmFja3M6IEZ1bmN0aW9uW10gPSBbXTtcclxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAoLi4uY2FsbGJhY2tzOiBGdW5jdGlvbltdKTogdm9pZCA9PiB7XHJcbiAgICBjYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcclxuICAgICAgICBydW50aW1lQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfSk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBleGVjUnVudGltZVNjcmlwdHMgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBydW50aW1lQ2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgY2FsbGJhY2soKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyogQWpheCArIEpRdWVyeSAqL1xyXG4vKlxyXG4gKiAgIEFsbHRob3VnaCBpIHRoaW5rIGl0IHdvdWxkIGJlIGJldHRlciB0byBkbyB3aXRob3V0IGpxdWVyeSwgaW0gbGF6eVxyXG4gKi9cclxuXHJcbmV4cG9ydCBjb25zdCBnZXQgPSAodXJsOiBzdHJpbmcsIGNhbGxiYWNrOiAoZGF0YTogb2JqZWN0KSA9PiB2b2lkKSA9PiB7XHJcbiAgICAkLmdldCh1cmwsIGNhbGxiYWNrLCBcImpzb25cIik7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcG9zdCA9ICh1cmw6IHN0cmluZywgZGF0YTogb2JqZWN0LCBjYWxsYmFjazogKHJlc3BvbnNlOiBvYmplY3QpID0+IHZvaWQpID0+IHtcclxuICAgIGNvbnN0IHNldHRpbmdzID0ge1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgdGltZW91dDogMCxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9O1xyXG4gICAgJC5hamF4KHNldHRpbmdzKS5kb25lKGNhbGxiYWNrKTtcclxufTtcclxuXHJcbi8qIE1pc2NlbGxhbmVvdXMgdXRpbGl0aWVzICovXHJcblxyXG5leHBvcnQgY29uc3QgbWFrZWlkID0gKGxlbmd0aDogbnVtYmVyKTogc3RyaW5nID0+IHtcclxuICAgIGxldCBpZCA9IFwiXCI7XHJcbiAgICBjb25zdCBjaGFyYWN0ZXJzID1cclxuICAgICAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVycy5sZW5ndGgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpZDtcclxufTtcclxuIiwiaW1wb3J0IHsgdXNlckxvZ2luUG9zdCB9IGZyb20gXCIuL2FqYXhcIjtcclxuaW1wb3J0IHsgVXNlciwgVXNlckxvZ2luUmVxdWVzdCwgVXNlckxvZ2luUmVzcG9uc2UgfSBmcm9tIFwiLi9tb2RlbHNcIjtcclxuXHJcblxyXG5cclxuLyogQWxsIHRoaXMgbWF5IGJlIG92ZXJ3cml0dGVuICovXHJcblxyXG5cclxuY29uc3QgYXV0aEtleSA9ICdmcmFtZXdvcmthcHBhdXRoJztcclxuY29uc3QgYXV0aEtleVVzZXJuYW1lID0gYXV0aEtleSArICd1c2VybmFtZSc7XHJcbmNvbnN0IGF1dGhLZXlUb2tlbiA9IGF1dGhLZXkgKyAndG9rZW4nO1xyXG5cclxuXHJcbmV4cG9ydCBsZXQgc2Vzc2lvblVzZXI6IFVzZXIgfCBudWxsID0gbnVsbDtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tDbGllbnRBdXRoID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgaWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShhdXRoS2V5KSAhPT0gbnVsbCAmJiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGF1dGhLZXkpICE9PSAnMCcpIHtcclxuICAgICAgICBpZihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGF1dGhLZXlVc2VybmFtZSkgIT09IG51bGwgJiYgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShhdXRoS2V5VXNlcm5hbWUpICE9PSAnMCcpIHtcclxuICAgICAgICAgICAgaWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShhdXRoS2V5VG9rZW4pICE9PSBudWxsICYmIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oYXV0aEtleVRva2VuKSAhPT0gJzAnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VybmFtZTogc3RyaW5nID0gPHN0cmluZz5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGF1dGhLZXlVc2VybmFtZSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuOiBzdHJpbmcgPSA8c3RyaW5nPnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oYXV0aEtleVRva2VuKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcjogVXNlciA9IHt1c2VybmFtZTogdXNlcm5hbWUsIHRva2VuOiB0b2tlbn07XHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uVXNlciA9IHVzZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBzZXRDbGllbnRBdXRoVXNlciA9ICh1c2VyOiBVc2VyKTogdm9pZCA9PiB7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGF1dGhLZXlUb2tlbiwgdXNlci50b2tlbik7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGF1dGhLZXlVc2VybmFtZSwgdXNlci51c2VybmFtZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRDbGllbnRBdXRoID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShhdXRoS2V5LCAndHJ1ZScpO1xyXG4gICAgaWYoc2Vzc2lvblVzZXIgIT09IG51bGwpIHNldENsaWVudEF1dGhVc2VyKHNlc3Npb25Vc2VyKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGxvZ2luID0gKHVzZXJMb2dpblJlcXVlc3Q6IFVzZXJMb2dpblJlcXVlc3QsIGNhbGxiYWNrOiAodXNlckxvZ2luUmVzcG9uc2U6IFVzZXJMb2dpblJlc3BvbnNlKSA9PiB2b2lkKSA9PiB7XHJcbiAgICB1c2VyTG9naW5Qb3N0KHVzZXJMb2dpblJlcXVlc3QsICh1c2VyTG9naW5SZXNwb25zZTogVXNlckxvZ2luUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZih1c2VyTG9naW5SZXNwb25zZS5hdXRob3JpemVkKSB7XHJcbiAgICAgICAgICAgIGlmKHVzZXJMb2dpblJlc3BvbnNlLnVzZXJuYW1lICE9PSB1bmRlZmluZWQgJiYgdXNlckxvZ2luUmVzcG9uc2UudG9rZW4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcjogVXNlciA9IHt1c2VybmFtZTogdXNlckxvZ2luUmVzcG9uc2UudXNlcm5hbWUsIHRva2VuOiB1c2VyTG9naW5SZXNwb25zZS50b2tlbn07XHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uVXNlciA9IHVzZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0Q2xpZW50QXV0aCgpO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsbGJhY2sodXNlckxvZ2luUmVzcG9uc2UpO1xyXG4gICAgfSlcclxufSBcclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVDbGllbnRBdXRoID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShhdXRoS2V5KTtcclxuICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oYXV0aEtleVRva2VuKTtcclxuICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oYXV0aEtleVVzZXJuYW1lKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNsZWFyU2Vzc2lvbiA9ICgpOiB2b2lkID0+IHtcclxuICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyByZW1vdmVDbGllbnRBdXRoLCBzZXNzaW9uVXNlciB9IGZyb20gXCIuLi9hdXRoXCI7XHJcbmltcG9ydCB7IERPTSwgaHRtbCwgcnVudGltZSB9IGZyb20gXCIuLi9mcmFtZXdvcmtcIjtcclxuXHJcbmxldCBhdXRob3JpemVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5jb25zdCB0b3BiYXJQcm9maWxlQnV0dG9uRXZlbnQgPSAoKSA9PiB7XHJcbiAgICByZW1vdmVDbGllbnRBdXRoKCk7XHJcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxufVxyXG5cclxuY2xhc3MgUHJvcHMge1xyXG4gICAgYXV0aG9yaXplZDogYm9vbGVhbiA9IGZhbHNlO1xyXG59XHJcblxyXG5jb25zdCBhdFJ1bnRpbWUgPSAoKSA9PiB7XHJcbiAgICAvL0RPTS5pZCgndG9wYmFyUHJvZmlsZUJ1dHRvbicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvcGJhclByb2ZpbGVCdXR0b25FdmVudCk7XHJcbiAgICBpZihhdXRob3JpemVkKSB7XHJcbiAgICAgICAgY29uc3QgdG9wYmFyUHJvZmlsZUJ1dHRvbiA9IDxIVE1MQW5jaG9yRWxlbWVudD5ET00uaWQoJ3RvcGJhclByb2ZpbGVCdXR0b24nKVxyXG4gICAgICAgIHRvcGJhclByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b3BiYXJQcm9maWxlQnV0dG9uRXZlbnQpO1xyXG4gICAgICAgIGlmKHNlc3Npb25Vc2VyICE9PSBudWxsKSB0b3BiYXJQcm9maWxlQnV0dG9uLmlubmVyVGV4dCA9IHNlc3Npb25Vc2VyLnVzZXJuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc2Vzc2lvblVzZXIudXNlcm5hbWUuc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRvcGJhciA9IChwcm9wczogUHJvcHMpID0+IHtcclxuICAgIHJ1bnRpbWUoYXRSdW50aW1lKTtcclxuICAgIGF1dGhvcml6ZWQgPSBwcm9wcy5hdXRob3JpemVkO1xyXG4gICAgaWYocHJvcHMuYXV0aG9yaXplZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICByZXR1cm4gaHRtbCgvKmh0bWwqL2BcclxuICAgICAgICA8ZGl2IGlkPVwidG9wYmFyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCIuL2Fzc2V0cy9mYXZpY29uLTMyeDMyLnBuZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGgxPkZyYW1ld29yayBBcHA8L2gxPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInB1YmxpY1wiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByaXZhdGVcIj5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCIgY2xhc3M9XCJidXR0b25cIj5Mb2dpbjwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYCk7XHJcbiAgICB9ZWxzZSBpZihwcm9wcy5hdXRob3JpemVkID09PSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGh0bWwoLypodG1sKi9gXHJcbiAgICAgICAgPGRpdiBpZD1cInRvcGJhclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi9hc3NldHMvZmF2aWNvbi0zMngzMi5wbmdcIj5cclxuICAgICAgICAgICAgICAgIDxoMT5GcmFtZXdvcmsgQXBwPC9oMT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwdWJsaWNcIj5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCIgY2xhc3M9XCJidXR0b25cIj5Ib21lPC9hPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9mZWVkXCIgY2xhc3M9XCJidXR0b25cIj5GZWVkPC9hPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9mcmllbmRzXCIgY2xhc3M9XCJidXR0b25cIj5GcmllbmRzPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByaXZhdGVcIj5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCIgY2xhc3M9XCJidXR0b25cIiBpZD1cInRvcGJhclByb2ZpbGVCdXR0b25cIj5NeSBQcm9maWxlPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgKTtcclxuICAgIH1cclxuICAgIFxyXG59O1xyXG4iLCJpbXBvcnQgeyBET00sIGh0bWwsIHJ1bnRpbWUgfSBmcm9tIFwiLi4vZnJhbWV3b3JrXCI7XHJcbmltcG9ydCB7IExvYWRpbmcsIHNldExvYWRpbmdTdGF0ZSB9IGZyb20gXCIuL2xvYWRpbmdcIjtcclxuaW1wb3J0IHsgbG9naW4sIHNldENsaWVudEF1dGggfSBmcm9tIFwiLi4vYXV0aFwiO1xyXG5cclxuY29uc3QgbG9naW5FdmVudCA9ICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IGxvZ2luTm90Rm91bmQgPSA8SFRNTFBhcmFncmFwaEVsZW1lbnQ+RE9NLmlkKCdsb2dpbk5vdEZvdW5kJyk7XHJcbiAgICBjb25zdCB1c2VybmFtZSA9IDxIVE1MSW5wdXRFbGVtZW50PkRPTS5pZCgndXNlcm5hbWUnKTtcclxuICAgIGNvbnN0IHBhc3N3b3JkID0gPEhUTUxJbnB1dEVsZW1lbnQ+RE9NLmlkKCdwYXNzd29yZCcpO1xyXG4gICAgaWYodXNlcm5hbWUudmFsdWUgIT0gJycgJiYgcGFzc3dvcmQudmFsdWUgIT0gJycpIHtcclxuICAgICAgICBsb2dpbih7dXNlcm5hbWU6IHVzZXJuYW1lLnZhbHVlLCBwYXNzd29yZDogcGFzc3dvcmQudmFsdWV9LCAodXNlckxvZ2luUmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgaWYodXNlckxvZ2luUmVzcG9uc2UuYXV0aG9yaXplZCkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBzZXRDbGllbnRBdXRoKCk7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbG9naW5Ob3RGb3VuZC5pbm5lclRleHQgPSAnSW5jb3JyZWN0IFVzZXJuYW1lIG9yIFBhc3N3b3JkISc7XHJcbiAgICAgICAgICAgICAgICBsb2dpbk5vdEZvdW5kLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfWVsc2Uge1xyXG4gICAgICAgIGxvZ2luTm90Rm91bmQuaW5uZXJUZXh0ID0gJ1BsZWFzZSBmaWxsIGluIGJvdGggVXNlcm5hbWUgYW5kIFBhc3N3b3JkISc7XHJcbiAgICAgICAgbG9naW5Ob3RGb3VuZC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCByZWdpc3RlckV2ZW50ID0gKCk6IHZvaWQgPT4ge1xyXG5cclxufVxyXG5cclxuY29uc3QgcmVjb3ZlckV2ZW50ID0gKCk6IHZvaWQgPT4ge1xyXG5cclxufVxyXG5cclxuY29uc3QgYXRSdW50aW1lID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgc2V0TG9hZGluZ1N0YXRlKGZhbHNlKTtcclxuICAgIERPTS5pZCgnbG9naW4nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsb2dpbkV2ZW50KTtcclxuICAgIERPTS5pZCgncmVnaXN0ZXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZWdpc3RlckV2ZW50KTtcclxuICAgIERPTS5pZCgncmVjb3ZlcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlY292ZXJFdmVudCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMb2dpbmZvcm0gPSAoKSA9PiB7XHJcbiAgICBET00uc2V0Q3NzSW1wb3J0KCdsb2dpbi5jc3MnKTtcclxuICAgIHJ1bnRpbWUoYXRSdW50aW1lKTtcclxuICAgIHJldHVybiBodG1sKC8qaHRtbCovYFxyXG4gICAgJHtMb2FkaW5nKCl9XHJcbiAgICA8ZGl2IGlkPVwibG9naW5wYWdlXCI+XHJcbiAgICAgICAgPGZvcm0gaWQ9XCJsb2dpbmZvcm1cIj5cclxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwibG9naW5mb3JtIGxvZ2ludGV4dFwiIGlkPVwidXNlcm5hbWVcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiVXNlcm5hbWVcIj5cclxuICAgICAgICAgICAgPGJyPlxyXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJsb2dpbmZvcm0gbG9naW50ZXh0XCIgaWQ9XCJwYXNzd29yZFwiIHR5cGU9XCJwYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIj5cclxuICAgICAgICAgICAgPHAgaWQ9XCJsb2dpbk5vdEZvdW5kXCI+SW5jb3JyZWN0IFVzZXJuYW1lIG9yIFBhc3N3b3JkITwvcD5cclxuICAgICAgICAgICAgPGhyPlxyXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJsb2dpbmZvcm0gbG9naW5idXR0b25cIiBpZD1cImxvZ2luXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiTG9naW5cIj5cclxuICAgICAgICAgICAgPGJyPlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwicmVncmVjXCI+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJsb2dpbmZvcm0gbG9naW5idXR0b24gcmVncmVjXCIgaWQ9XCJyZWdpc3RlclwiIHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIlJlZ2lzdGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJsb2dpbmZvcm0gbG9naW5idXR0b24gcmVncmVjXCIgaWQ9XCJyZWNvdmVyXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiUmVjb3ZlclwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPC9mb3JtPlxyXG4gICAgPC9kaXY+XHJcbiAgICBgKTtcclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVXNlckxvZ2luUmVxdWVzdCwgVXNlckxvZ2luUmVzcG9uc2UgfSBmcm9tIFwiLi9tb2RlbHNcIjtcclxuaW1wb3J0IHsgZ2V0LCBwb3N0IH0gZnJvbSAnLi9mcmFtZXdvcmsnXHJcblxyXG5leHBvcnQgY29uc3QgdXNlckxvZ2luUG9zdCA9ICh1c2VyTG9naW46IFVzZXJMb2dpblJlcXVlc3QsIGNhbGxiYWNrOiAodXNlckxvZ2luUmVzcG9uc2U6IFVzZXJMb2dpblJlc3BvbnNlKSA9PiB2b2lkKTogdm9pZCA9PiB7XHJcbiAgICBwb3N0KCcvYXV0aC9sb2dpbicsIHVzZXJMb2dpbiwgKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgY2FsbGJhY2soPFVzZXJMb2dpblJlc3BvbnNlPnJlc3BvbnNlKTtcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBET00sIGh0bWwgfSBmcm9tIFwiLi4vZnJhbWV3b3JrXCJcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRMb2FkaW5nU3RhdGUgPSAoc3RhdGU6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+RE9NLmlkKCdsb2FkaW5nJyk7XHJcbiAgICBpZihzdGF0ZSkge1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICAgIH1lbHNlIHtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IExvYWRpbmcgPSAoKSA9PiB7XHJcbiAgICBET00uc2V0Q3NzSW1wb3J0KCdsb2FkaW5nLmNzcycpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gaHRtbCgvKmh0bWwqL2BcclxuICAgICAgICA8ZGl2IGlkPVwibG9hZGluZ1wiPlxyXG4gICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiBzdHlsZT1cIm1hcmdpbjogYXV0bzsgYmFja2dyb3VuZDogcmdiKDI1NSwgMjU1LCAyNTUsIDApIG5vbmUgcmVwZWF0IHNjcm9sbCAwJSAwJTsgZGlzcGxheTogYmxvY2s7IHNoYXBlLXJlbmRlcmluZzogYXV0bztcIiB3aWR0aD1cIjIwMHB4XCIgaGVpZ2h0PVwiMjAwcHhcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pZFlNaWRcIj5cclxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiMzJcIiBzdHJva2Utd2lkdGg9XCI4XCIgc3Ryb2tlPVwiI2ZmMWYxZlwiIHN0cm9rZS1kYXNoYXJyYXk9XCI1MC4yNjU0ODI0NTc0MzY2OSA1MC4yNjU0ODI0NTc0MzY2OVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiPlxyXG4gICAgICAgICAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT1cInRyYW5zZm9ybVwiIHR5cGU9XCJyb3RhdGVcIiBkdXI9XCIxc1wiIHJlcGVhdENvdW50PVwiaW5kZWZpbml0ZVwiIGtleVRpbWVzPVwiMDsxXCIgdmFsdWVzPVwiMCA1MCA1MDszNjAgNTAgNTBcIj48L2FuaW1hdGVUcmFuc2Zvcm0+XHJcbiAgICAgICAgICAgICAgICA8L2NpcmNsZT5cclxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiMjNcIiBzdHJva2Utd2lkdGg9XCI4XCIgc3Ryb2tlPVwiI2ZmZmZkMFwiIHN0cm9rZS1kYXNoYXJyYXk9XCIzNi4xMjgzMTU1MTYyODI2MiAzNi4xMjgzMTU1MTYyODI2MlwiIHN0cm9rZS1kYXNob2Zmc2V0PVwiMzYuMTI4MzE1NTE2MjgyNjJcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIj5cclxuICAgICAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9XCJ0cmFuc2Zvcm1cIiB0eXBlPVwicm90YXRlXCIgZHVyPVwiMXNcIiByZXBlYXRDb3VudD1cImluZGVmaW5pdGVcIiBrZXlUaW1lcz1cIjA7MVwiIHZhbHVlcz1cIjAgNTAgNTA7LTM2MCA1MCA1MFwiPjwvYW5pbWF0ZVRyYW5zZm9ybT5cclxuICAgICAgICAgICAgICAgIDwvY2lyY2xlPlxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGApO1xyXG59XHJcbiIsImltcG9ydCB7IGh0bWwsIERPTSB9IGZyb20gJy4uL2ZyYW1ld29yayc7XHJcbmltcG9ydCB7IFRvcGJhciB9IGZyb20gJy4uL2NvbXBvbmVudHMvdG9wYmFyJztcclxuaW1wb3J0IHsgTG9naW5mb3JtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9sb2dpbmZvcm0nO1xyXG5cclxuY2xhc3MgUHJvcHMge1xyXG4gICAgYXV0aG9yaXplZDogYm9vbGVhbiA9IGZhbHNlO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IExhbmRpbmcgPSAocHJvcHM6IFByb3BzKSA9PiB7XHJcbiAgICBET00uc2V0VGl0bGUoJ0hvbWVwYWdlJyk7XHJcbiAgICBpZihwcm9wcy5hdXRob3JpemVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGh0bWwoYFxyXG4gICAgICAgICR7VG9wYmFyKHthdXRob3JpemVkOiB0cnVlfSl9XHJcbiAgICAgICAgYCk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGh0bWwoYFxyXG4gICAgICAgICR7VG9wYmFyKHthdXRob3JpemVkOiBmYWxzZX0pfVxyXG4gICAgICAgICR7TG9naW5mb3JtKCl9XHJcbiAgICAgICAgYCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XG5pbXBvcnQgeyBleGVjUnVudGltZVNjcmlwdHMgfSBmcm9tIFwiLi9mcmFtZXdvcmtcIjtcblxuY29uc3QgaHRtbEFwcFRhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd4LWFwcCcpWzBdO1xuXG5pZihodG1sQXBwVGFnICE9IG51bGwpIHtcbiAgICBodG1sQXBwVGFnLmlubmVySFRNTCA9IEFwcCgpO1xuICAgIGV4ZWNSdW50aW1lU2NyaXB0cygpO1xufWVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCclYzx4LWFwcD48L3gtYXBwPiVjIGlzIG5vdCBkZWZpbmVkIScsXG4gICAgJ2NvbG9yOiB3aGl0ZTsgYmFja2dyb3VuZC1jb2xvcjogYmx1ZTsgZm9udC1zaXplOiAxLjJlbScsICdjb2xvcjogcmVkOyBmb250LXNpemU6IDEuMmVtJyk7XG59XG5cbiIsImltcG9ydCB7IGNoZWNrQ2xpZW50QXV0aCwgc2V0Q2xpZW50QXV0aCB9IGZyb20gJy4vYXV0aCc7XHJcbmltcG9ydCB7IFRvcGJhciB9IGZyb20gJy4vY29tcG9uZW50cy90b3BiYXInO1xyXG5pbXBvcnQgeyBodG1sLCBET00gfSBmcm9tICcuL2ZyYW1ld29yayc7XHJcbmltcG9ydCB7IExhbmRpbmcgfSBmcm9tICcuL3JvdXRlcy9sYW5kaW5nJztcclxuaW1wb3J0IHsgVG9kb3BhZ2UgfSBmcm9tICcuL3JvdXRlcy90b2RvcGFnZSc7XHJcblxyXG5leHBvcnQgY29uc3QgQXBwID0gKCk6IHN0cmluZyA9PiB7XHJcbiAgICBET00uc2V0VGl0bGUoJ0FwcCcpO1xyXG4gICAgRE9NLnNldENzc0ltcG9ydCgnbWFpbi5jc3MnKVxyXG5cclxuICAgIHN3aXRjaCh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpIHtcclxuICAgICAgICBjYXNlICcvJzpcclxuICAgICAgICAgICAgcmV0dXJuIGh0bWwoLypodG1sKi9gJHtMYW5kaW5nKHthdXRob3JpemVkOiBjaGVja0NsaWVudEF1dGgoKX0pfWApO1xyXG5cclxuICAgICAgICBjYXNlICcvbG9naW4nOlxyXG4gICAgICAgICAgICByZXR1cm4gaHRtbCgvKmh0bWwqL2Ake0xhbmRpbmcoe2F1dGhvcml6ZWQ6IGNoZWNrQ2xpZW50QXV0aCgpfSl9YCk7XHJcblxyXG4gICAgICAgIGNhc2UgJy90b2RvJzpcclxuICAgICAgICAgICAgcmV0dXJuIGh0bWwoLypodG1sKi9gJHtUb3BiYXIoe2F1dGhvcml6ZWQ6IGNoZWNrQ2xpZW50QXV0aCgpfSl9JHtUb2RvcGFnZSgpfWApO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gaHRtbChgJHtMYW5kaW5nKHthdXRob3JpemVkOiBjaGVja0NsaWVudEF1dGgoKX0pfWApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tIFwiLi4vZnJhbWV3b3JrXCI7XHJcblxyXG5leHBvcnQgY29uc3QgVG9kb3BhZ2UgPSAoKSA9PiB7XHJcblxyXG4gICAgXHJcbiAgICBmZXRjaCgnaHR0cDovL2dhbWVyL3RvZG8ucGFnZScpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKS50aGVuKGRhdGEgPT4gZG9jdW1lbnQud3JpdGUoZGF0YSkpO1xyXG5cclxuICAgIHJldHVybiBodG1sKC8qaHRtbCovYGApO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=